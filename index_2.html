<!DOCTYPE html>
<html>
  <head> </head>
  <body style="margin:0px;overflow:hidden;">
    <div id="game">
      <canvas
        id="canvas"
        width="800"
        height="600"
        style="background:#000000;vertical-align:top;"
      ></canvas>
    </div>

    <script type="text/javascript" src="js/three.js"></script>
    <script type="text/javascript" src="js/FirstPersonControls.js"></script>

    <script type="text/javascript">
      "use strict";

      var scene, camera, renderer, controls;
      var canvas = document.getElementById("canvas");
      var width = window.innerWidth;
      var height = window.innerHeight;
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      var meshes = [];
      var clock = new THREE.Clock();
      var timer = 0;

      camera = new THREE.PerspectiveCamera(60, width / height, 1, 10000);
      camera.position.set(-300, 150, 200);

      renderer = new THREE.WebGLRenderer({
        canvas: canvas,
        antialias: true,
        alpha: true,
        transparent: true,
        premultipliedAlpha: false
      });
      renderer.setSize(width, height);
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setClearColor(0x000000);
      renderer.shadowMap.enabled = true;
      renderer.shadowMap.type = 0;
      renderer.gammaInput = true;
      renderer.gammaOutput = true;

      controls = new THREE.FirstPersonControls(camera, renderer.domElement);
      controls.movementSpeed = 200;
      controls.lookSpeed = 0.1;
      controls.lookVertical = true;

      scene = new THREE.Scene();

      // ________________________ axes directions ________________________

      scene.add(new THREE.AxesHelper(100));

      // ________________________ Environment light ________________________

      var ambient = new THREE.AmbientLight(0xf5cf6b, 0.2);
      scene.add(ambient);

      // ________________________Sun light ________________________

      var sun = new THREE.DirectionalLight(0xfbecc4, 1.2);
      sun.position.set(350, 400, 350);
      sun.castShadow = true;
      sun.shadow.mapSize.width = 4096;
      sun.shadow.mapSize.height = 4096;
      sun.shadow.camera.near = 10;
      sun.shadow.camera.far = 1700;
      sun.shadow.camera.left = -2000;
      sun.shadow.camera.right = 2000;
      sun.shadow.camera.top = 1350;
      sun.shadow.camera.bottom = -1350;
      sun.shadow.bias = -0.005;
      sun.shadow.radius = 1;
      scene.add(sun);

      scene.add(new THREE.DirectionalLightHelper(sun, 100));

      //__________________sky - box ______________

      meshes["sky"] = new THREE.Mesh(
        new THREE.BoxBufferGeometry(1000, 1000, 1000),
        new THREE.MeshLambertMaterial({
          color: 0x004080,
          side: THREE.BackSide
        })
      );
      meshes["sky"].receiveShadow = true;
      meshes["sky"].position.set(0, 480, 0);
      scene.add(meshes["sky"]);

      //__________________Flour ______________

      meshes["ground"] = new THREE.Mesh(
        new THREE.PlaneBufferGeometry(1000, 1000),
        new THREE.MeshPhongMaterial({
          color: 0x909090
        })
      );
      meshes["ground"].receiveShadow = true;
      meshes["ground"].position.y = -10;
      meshes["ground"].geometry.applyMatrix(
        new THREE.Matrix4().makeRotationX(-90 * (Math.PI / 180))
      );
      scene.add(meshes["ground"]);

      //__________________ Object rotation ______________

      //__________________ to X ______________

      meshes["box_rotate_x"] = new THREE.Mesh(
        new THREE.BoxBufferGeometry(10, 5, 5),
        new THREE.MeshLambertMaterial({ color: 0xff2020 })
      );
      meshes["box_rotate_x"].castShadow = true;
      meshes["box_rotate_x"].position.set(150, 0, 0);
      scene.add(meshes["box_rotate_x"]);

      //__________________ to Y ______________

      meshes["box_rotate_y"] = new THREE.Mesh(
        new THREE.BoxBufferGeometry(5, 10, 5),
        new THREE.MeshLambertMaterial({ color: 0x002090 })
      );
      meshes["box_rotate_y"].castShadow = true;
      meshes["box_rotate_y"].position.set(200, 0, 0);
      scene.add(meshes["box_rotate_y"]);

      //__________________ to Z ______________

      meshes["box_rotate_z"] = new THREE.Mesh(
        new THREE.BoxBufferGeometry(5, 5, 10),
        new THREE.MeshLambertMaterial({ color: 0x009000 })
      );
      meshes["box_rotate_z"].castShadow = true;
      meshes["box_rotate_z"].position.set(250, 0, 0);
      scene.add(meshes["box_rotate_z"]);

      //__________________ to XZ ______________

      meshes["box_rotate_xz"] = new THREE.Mesh(
        new THREE.BoxBufferGeometry(10, 10, 10),
        new THREE.MeshLambertMaterial({ color: 0xff00ff })
      );
      meshes["box_rotate_xz"].castShadow = true;
      meshes["box_rotate_xz"].position.set(300, 0, 0);
      scene.add(meshes["box_rotate_xz"]);

      //__________________ to XYZ ______________

      meshes["box_rotate_xyz"] = new THREE.Mesh(
        new THREE.BoxBufferGeometry(10, 10, 10),
        new THREE.MeshLambertMaterial({ color: 0xffff00 })
      );
      meshes["box_rotate_xyz"].castShadow = true;
      meshes["box_rotate_xyz"].position.set(350, 0, 0);
      scene.add(meshes["box_rotate_xyz"]);

      //__________________ rotation to X inside an object, wich rotates to Y ______________

      meshes["object_rotate_y"] = new THREE.Object3D();
      meshes["object_rotate_y"].position.set(150, 0, 50);
      scene.add(meshes["object_rotate_y"]);

      meshes["box_rotate_x_2"] = new THREE.Mesh(
        new THREE.BoxBufferGeometry(20, 2, 2),
        new THREE.MeshLambertMaterial({ color: 0xff2020 })
      );
      meshes["box_rotate_x_2"].castShadow = true;
      meshes["box_rotate_x_2"].position.set(0, 0, 0);
      meshes["object_rotate_y"].add(meshes["box_rotate_x_2"]);

      loop();

      // ________________________ Rendering ________________________

      function loop() {
        requestAnimationFrame(loop);

        var delta = clock.getDelta();

        controls.update(delta);

        //__________________ Object rotation ______________

        meshes["box_rotate_x"].rotation.x += 0.1; // red box
        meshes["box_rotate_y"].rotation.y += 0.1; // blue box
        meshes["box_rotate_z"].rotation.z += 0.1; // green box

        meshes["box_rotate_xz"].rotation.x += 0.1; // purple box
        meshes["box_rotate_xz"].rotation.z += 0.1;

        meshes["box_rotate_xyz"].rotation.x += 0.1; // yellow box
        meshes["box_rotate_xyz"].rotation.y += 0.1;
        meshes["box_rotate_xyz"].rotation.z += 0.1;

        meshes["object_rotate_y"].rotation.y += 0.05; // rotate 3D object
        meshes["box_rotate_x_2"].rotation.x += 0.2; // adding a red box to it

        renderer.render(scene, camera);
      }
    </script>
  </body>
</html>
